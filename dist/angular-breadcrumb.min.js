/*! angular-breadcrumb - v0.1.0 - 2014-04-09
* https://github.com/ncuillery/angular-breadcrumb
* Copyright (c) 2014 Nicolas Cuillery; Licensed MIT */
angular.module("ncy-angular-breadcrumb",["ui.router.state"]).provider("$breadcrumb",function(){var a={};this.setPrefixState=function(b){a.prefixStateName=b};var b=function(a,b){var c=!1;return angular.forEach(a,function(a){!c&&angular.equals(a,b)&&(c=!0)}),c||a.push(b),c};this.$get=["$state",function(c){return{getStatesChain:function(){var d=[];if(a.prefixStateName){var e=c.get(a.prefixStateName);if(!e)throw'Bad configuration : prefixState "'+a.prefixStateName+'" unknown';var f=angular.extend(e,{ncyBreadcrumbLink:c.href(e)});b(d,f)}return angular.forEach(c.$current.path,function(a){var e=angular.extend(a.self,{ncyBreadcrumbLink:c.href(a)});b(d,e)}),d}}}]}).directive("ncyBreadcrumb",["$state","$interpolate","$breadcrumb","$rootScope",function(a,b,c,d){return{replace:!0,template:'<ul class="breadcrumb"><li ng-repeat="step in steps | limitTo:(steps.length-1)"><a href="{{step.ncyBreadcrumbLink}}">{{step.ncyBreadcrumbLabel}}</a> <span class="divider">/</span></li><li ng-repeat="step in steps | limitTo:-1" class="active"><span>{{step.ncyBreadcrumbLabel}}</span></li></ul>',link:{post:function(a){d.$on("$viewContentLoaded",function(d){a.steps=c.getStatesChain(),angular.forEach(a.steps,function(a){if(a.data&&a.data.ncyBreadcrumbLabel){var c=b(a.data.ncyBreadcrumbLabel);a.ncyBreadcrumbLabel=c(d.targetScope)}else a.ncyBreadcrumbLabel=a.name})})}}}}]);